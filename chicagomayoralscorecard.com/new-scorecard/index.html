<!Doctype html>
<html>
<head>
<title>Scorecard Tester</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="../election_js/jquery.formatCurrency-1.4.0.js"></script>
<script src="../election_js/jquery.cuteTime.min.js"></script>

<style type="text/css">
body {
width: 800px;
}

.titlebar {
font-family: Helvetica, Verdana, Arial, sans-serif;
clear: both;
margin-bottom: 8px;
background-color: #a9c95d;
width: 800px;
padding: 10px;
font-size: 1.3em;
border: 2px solid #5c7c11;
-webkit-border-radius: 8px;
cursor: pointer;
}

.even {
background-color: #d1e176;
}

.titlebar:hover {

background-color: #ccf074;

-webkit-box-shadow: 0px 3px 5px #c2c2c2;
}

.titlebar.even:hover {
	background-color: #e6ff85;
}

li {
clear: all;
	list-style-type: none;
}

.dashboard {
font-family: Helvetica, Verdana, Arial, sans-serif;
padding-left: 10px;
padding-right: 10px;
display: none;
	margin-bottom: 30px;
	overflow: hidden;
}

.dashboard img {
margin-bottom: 10px;
border: 2px solid black;
-webkit-border-radius: 8px;
}

.dashboard #leftside {
margin-left: 10px;
width: 220px;
float: left;
border-right: 1px solid gray;
height: 300px;
}

.dashboard img:hover {
opacity: .8;
}

.dashboard iframe {
float: right;
}

.bottomshadow {
-webkit-box-shadow: 0px 3px 5px #c2c2c2;
-margin-bottom: 15px;
}

.cash {
font-weight: bold;
}

ul {
padding: 0;
margin: 0;
}

#show {
float: right;
margin-left: 25px;
display: inline;
font-style: normal;
font-weight: normal;
font-family: Helvetica, Verdana, Arial, sans-serif;
font-size: 0.7em;
border-color: #562307;
border-style: outset;
border-width: 3px;
padding: 8px;
background-color: #de9e23;
-webkit-border-radius: 8px;
cursor: pointer;
}

#show:hover {
background-color: #ffe71c;
}

</style>

</head>
<body>
<h1>Chicago Mayoral Scorecard <div id="show">open all</div></h1>
<p>Click on a candidate to see their web dashboard</p>
<div id="result">
<ul>
</ul>
</div>
<script type="text/javascript">

var yqlURL="http://query.yahooapis.com/v1/public/yql?q=select%20Name%2CCurrent_Position%2CCash_in_all_accounts%2Cwebsite%2Ctwitter%2Cfacebook%2Cnews_feed%20from%20csv%20where%20url%3D'https%3A%2F%2Fspreadsheets.google.com%2Fpub%3Fkey%3D0Anp-zgGKPxl7dEJ0dDlqRFVLTWNiY21GclE2ekNZZWc%26hl%3Den%26output%3Dcsv'%20and%20columns%3D'Name%2CCurrent%20Position%2CStatus%2CCash%20in%20all%20accounts%2Cwebsite%2Ctwitter%2Cfacebook%2Cnews%20feed'&format=json&diagnostics=true&callback=?";

$.getJSON(yqlURL, function(data) {

 $.each(data.query.results.row, function() {
 
 var screenshot ="http://images.websnapr.com/?size=S&key=N2Ja44uUT7J5&url=url"+this.website;
 
 var twitter = this.twitter 
  
   
 var li = $('<li>').html('<div class="titlebar"><b>'
 +this.Name
 +'</b> | current position: '
 +this.Current_Position
 +'</div><div class="dashboard"><div id="leftside"><a href="'
 +this.website
 +'" target="_blank"><img src="'
 +screenshot
 +'"></a> Cash on hand: <span class="cash"> '
 +this.Cash_in_all_accounts
 +'</span><span class="tweetdisplay"></span></div><a href="'
 +this.news_feed
 +'">more news about '
 +this.Name
 +'</a><iframe src="http://www.facebook.com/plugins/likebox.php?href='
 +this.facebook
 +'&amp;width=250&amp;colorscheme=light&amp;connections=8&amp;stream=false&amp;header=false&amp;height=275" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:250px; height:275px;" allowTransparency="true"></iframe></div>');
 

 
 $('.cash').formatCurrency();
 

var followers="http://api.twitter.com/1/users/show.json?screen_name="+twitter+"&callback=?"
 
 $.getJSON(followers, function(data) {
 
 
var tweetinfo = $('<li>').html('<li>twitter account: <a href="http://www.twitter.com/'+twitter+'">@'+twitter+'</a><li>twitter followers: ' +data.followers_count+ '<li>posts: '+data.statuses_count+'<li>last post: <span class="time2">'+data.status.created_at);
 
$('.tweetdisplay').append(tweetinfo);

 $('.time2').cuteTime();


 
 });
 
 $('#result ul').append(li);

 });
 
 $('#result .titlebar:even').addClass('even');

 
$('#result li:first').hide();



 
 $('.titlebar').click(function(){
 var d = $(this).next();
d.slideToggle('fast');
 $(this).toggleClass('bottomshadow');
 });
 

 });
 
 $('#show').click(function(){
 var text = $('#show').text();
$('#show').text(
        text == "open all" ? "close all" : "open all");
 $('.dashboard').slideToggle('fast');
 $('.titlebar').toggleClass('bottomshadow');
 });

 

</script>
</body>
</html>